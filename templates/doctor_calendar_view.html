<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Patient Plan - Doctor View</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='public/logo.ico') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{{ url_for('static', filename='doctor.css') }}">
</head>
<body>

    {% include "components/doctor_sidebar.html" %}

    <div class="main-container">
        <h1 class="page-title">{{ patient_name }}'s Plan Calendar</h1>

        {% include "components/calendar_dom.html" %}
        {% include "components/calendar_view.html" %}
    </div>

    <script>
        window.addEventListener("load", function () {
            // 这里用的是后端传进来的 patient_id，
            const patientId = "{{ patient_id }}";

            create_calendar({
                userId: patientId,
                planApiBase: "/get_user_plan",  // 后端已经根据 id 返回该 user 的 plan
                drugApiBase: "/get_drug"
            });
        });
    </script>
</body>
</html>